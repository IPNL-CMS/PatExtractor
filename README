# This is PatExtractor, a CMSSW package to extractor PAT tuples to plain ROOT format
# You might want to also check 'PatTopProduction' package, a set of python configuration to produce
# PAT tuples which can be used by this package: http://ipnl.madalynn.eu/PatTopProduction.git

# PAT V08-09-57, CMSSW 5.3.9 patch2

# Get the release
export SCRAM_ARCH=slc5_amd64_gcc462

cmsrel CMSSW_5_3_9_patch2
cd CMSSW_5_3_9_patch2/src/
cmsenv

# First, start by cloning the repository
mkdir Extractors
cd Extractors

# If you have write access, do
git clone git@github.com:IPNL-CMS/PatExtractor.git

# Otherwise, for read-only access
git clone git://github.com/IPNL-CMS/PatExtractor.git

cd ..

# PAT
addpkg DataFormats/PatCandidates   V06-05-06-10
addpkg PhysicsTools/PatAlgos       V08-09-57
addpkg PhysicsTools/PatUtils       V03-09-28
addpkg DataFormats/CaloRecHit      V02-05-11
addpkg DataFormats/StdDictionaries V00-02-15
addpkg FWCore/GuiBrowsers          V00-00-70
addpkg RecoMET/METProducers        V03-03-12-02

# Latest EGM isolation
addpkg RecoParticleFlow/PFProducer V15-02-06

# MET corrections
addpkg RecoMET/METAnalyzers V00-00-08

# MET Filters
addpkg RecoMET/METFilters V00-00-13-01
cvs co -r V00-03-23 CommonTools/RecoAlgos
cvs co -r V01-00-11-01 DPGAnalysis/Skims
cvs co -r V00-11-17 DPGAnalysis/SiStripTools
cvs co -r V00-00-08 DataFormats/TrackerCommon
cvs co -r V01-09-05 RecoLocalTracker/SubCollectionProducers

# EGM MVA tag
cvs co -r V00-00-31 -d EGamma/EGammaAnalysisTools UserCode/EGamma/EGammaAnalysisTools
cd EGamma/EGammaAnalysisTools/data
cat download.url | xargs wget
cd -

addpkg JetMETCorrections/Type1MET
cvs update -A JetMETCorrections/Type1MET/python/pfMETsysShiftCorrections_cfi.py
cvs update -A JetMETCorrections/Type1MET/plugins/SysShiftMETcorrInputProducer.cc
cvs update -A JetMETCorrections/Type1MET/plugins/SysShiftMETcorrInputProducer.h
cvs update -A JetMETCorrections/Type1MET/src/SysShiftMETcorrExtractor.cc
cvs update -A JetMETCorrections/Type1MET/interface/SysShiftMETcorrExtractor.h

# Needed ?
# Latest Tau discriminators
#addpkg RecoTauTag/RecoTau V01-04-25
#addpkg RecoTauTag/Configuration V01-04-13

# Patch PAT to add support for Effective Area corrections
addpkg CommonTools/ParticleFlow
patch -p0 < PatTopProduction/EGamma.patch
patch -p0 < PatTopProduction/ParticleFlow.patch
